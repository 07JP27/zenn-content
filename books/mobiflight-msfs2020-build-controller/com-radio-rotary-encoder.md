---
title: "[WIP]無線周波数をロータリーエンコーダーで入力する"
---

:::message alert
このチャプターは執筆途中です。
:::

# 本チャプターの内容
前チャプターでは7セグメントLEDでの数値出力を行いました。
このチャプターでは無線周波数をロータリーエンコーダー（ダイヤル）で設定することを題材に、ロータリーエンコーダーの入力を学びます。
前チャプターで出力部分を作成したので、それをそのまま使用して入力を追加します。前チャプターをやっていなくても問題はありません。
具体的な動作イメージはロータリーエンコーダーを時計回りに回すとスタンバイの無線周波数が増加し、反時計回りに回すと減少するような挙動です。
前チャプターの7セグメントLEDが接続されていればスタンバイの無線周波数がロータリーエンコーダーの操作に連動して表示されます。

# 準備するもの
- Arduino
- ロータリーエンコーダー
- ブレッドボード
- ジャンパーワイヤー

# 回路図
Arduinoと準備した電子部品を以下のように接続します。
![](/images/mobiflight-msfs2020-build-controller/com-radio-rotary-encoder/breadboard.png =400x)
回路図で表すと、このようになります。
![](/images/mobiflight-msfs2020-build-controller/com-radio-rotary-encoder/circuit.png =700x)

# MobiFlightの設定
### デバイスの設定
### フライトシミュレーターとデバイスのマッピング

# 実行
1. MSFS2020を起動します。
1. MSFS2020が起動していればMobiFlight Connectorの`Run`ボタンがクリックできるようになるので、マッピングがActiveになってることを確認して`Run`ボタンをクリックします。
![](/images/mobiflight-msfs2020-build-controller/com-radio-rotary-encoder/201.png)
1. MSFS2020で適当なフリーフライトを開始します。
1. 無線パネルで周波数変更ダイヤルを回して画面内のスタンバイ無線周波数が変更できること、前チャプターで作成した7セグメントLEDが接続されている場合は、それも連動して表示されることを確認します。

# まとめ
これでロータリーエンコーダーを使用した入力ができるようになりました。
ここまで学んできたスイッチ、LED、7セグメントLED、ダイヤルを組み合わせると、すでに数多くのコックピット要素を作成できるようになっているはずです。
次のチャプターでは、スロットルなどに使用される可変抵抗（ポテンショメーター）を使ったアナログ値の入力を行います。

# クリーンアップ
使用しているピンが多くなってきたので、次のチャプターへ進む前に今回設定したデバイスとマッピングを削除します。
設定をこのまま残したい場合は削除する必要はありません。
