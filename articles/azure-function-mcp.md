---
title: "Azure Functionsã§MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹ï¼"
emoji: "ğŸ¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["mcp", "azure", "azurefunctions"]
published: true
publication_name: "microsoft"
---

## æ³¨ç›®MCPãƒ‹ãƒ¥ãƒ¼ã‚¹
æ˜¨ä»ŠLLMç•Œéšˆã‚’è³‘ã‚ã›ã¦ã„ã‚‹MCPï¼ˆModel Context Protocolï¼‰ã§ã™ãŒã€å€‹äººçš„ã«ã¯æœ€è¿‘ã®ãƒ“ãƒƒã‚°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¨ã—ã¦ä»¥ä¸‹ã®ï¼’ã¤ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚

### Azure Functionsãƒˆãƒªã‚¬ãƒ¼ãŒMCPã«å¯¾å¿œ!
Azure Functionsã¯ã€Œãƒˆãƒªã‚¬ãƒ¼ã€ã¨å‘¼ã°ã‚Œã‚‹ä»•çµ„ã¿ã‚’ä½¿ã£ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ˆãŸã¨ãˆã°ã‚¿ã‚¤ãƒãƒ¼ãƒˆãƒªã‚¬ãƒ¼ã§å®šæœŸå®Ÿè¡Œã€HTTPãƒˆãƒªã‚¬ãƒ¼ã§Web APIã‚’ä½œã‚‹ã€ãªã©ï¼‰ã€‚
2025å¹´4æœˆ5æ—¥ã«Azure Functionsã®MCPãƒˆãƒªã‚¬ãƒ¼ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆã¨ã—ã¦å…¬é–‹ã•ã‚ŒãŸã“ã¨ãŒMicrosoftã®å…¬å¼ãƒ–ãƒ­ã‚°ã§ç™ºè¡¨ã•ã‚Œã¾ã—ãŸã€‚æœ¬è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã®å¯¾å¿œè¨€èªã¯C#ã€Pythonã€Nodeã®3ã¤ã§ã™ã€‚
https://techcommunity.microsoft.com/blog/appsonazureblog/build-ai-agent-tools-using-remote-mcp-with-azure-functions/4401059

### VS Code Stable 1.99ã§MCPãŒæ­£å¼ã‚µãƒãƒ¼ãƒˆ!
GitHub Copilotã«Agent modeãŒè¿½åŠ ã•ã‚Œã€ãã‚Œã¨åŒæ™‚ã«MCPãŒãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰ã€‚
ã“ã‚Œã¾ã§GitHub Copilotã¯Clineãªã©ã¨æ¯”è¼ƒã—ã¦Agenticãªå‹•ä½œãŒå¼±ã„ã¨ã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ã“ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã£ã¦æ¥­ç•Œã®æœ€å…ˆç«¯ã«ä¸¦ã‚“ã çŠ¶æ³ã§ã™ã€‚
https://code.visualstudio.com/updates/v1_99


ã¨ã„ã†ã‚ã‘ã§ä»Šå›ã¯ã“ã®ï¼’ã¤ã‚’æ›ã‘åˆã‚ã›ã¦ã€Azure Functionsã‚’ä½¿ã£ã¦MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚Šã€VS Codeã®GitHub Copilotã®Agent modeã§ã€ãã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚


## ä½œã‚‹ã‚‚ã®
ä»Šå›ã¯ä¸»ã«MCPã‚µãƒ¼ãƒãƒ¼ï¼ˆAzure Functionsï¼‰ã®å®Ÿè£…ã¨MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç–é€šç¢ºèªãŒã§ãã‚Œã°è‰¯ã„ã®ã§ã€MCPã‚µãƒ¼ãƒãƒ¼ã®å‡¦ç†ã¯ã‚ã¾ã‚Šå‡ã‚‰ãšã«ã€MCPã®ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ã‚ˆãä½¿ã‚ã‚Œã‚‹[mcp_server_time](https://github.com/modelcontextprotocol/servers/tree/main/src/time/src/mcp_server_time)ã¨åŒã˜ãç¾åœ¨æ™‚åˆ»ã‚’è¿”ã™ã ã‘ã®å‡¦ç†ã«ã—ã¾ã™ã€‚

ãªãŠä»Šå›Azure Functionsã®å®Ÿè£…ã¯C#ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€Azure Functionsã®MCPã‚µãƒ¼ãƒãƒ¼ãƒˆãƒªã‚¬ãƒ¼ã¯å‰è¿°ã®é€šã‚ŠPythonã¨Nodeã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

## ã‚„ã£ã¦ã¿ã‚‹
### MCPã‚µãƒ¼ãƒãƒ¼ï¼šAzure Functionsã®ä½œæˆã¨å®Ÿè¡Œ
#### Azure Functionsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
ã¯ã˜ã‚ã«[Visual Studio Code ã‚’ä½¿ç”¨ã—ã¦ Azure Functions ã‚’é–‹ç™ºã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/azure-functions/functions-develop-vs-code?tabs=node-v4%2Cpython-v2%2Cisolated-process%2Cquick-create&pivots=programming-language-csharp)ã®ã€ŒAzure Functions ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚è€ƒã«Azure Functionsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

#### MCPã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®è¿½åŠ 
ç¶šã„ã¦Azure Functionsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«MCPã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚³ãƒãƒ³ãƒ‰ã‚‚ã—ãã¯ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ(Shift + Ctrl + P)ã‹ã‚‰nugetã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
https://www.nuget.org/packages/Microsoft.Azure.Functions.Worker.Extensions.Mcp

```bash
dotnet add package Microsoft.Azure.Functions.Worker.Extensions.Mcp --version 1.0.0-preview.1
```
:::message
ãªãŠã€pythonã¨Nodeã§å®Ÿè£…ã™ã‚‹å ´åˆã¯host.jsonã«ãƒãƒ³ãƒ‰ãƒ«å‚ç…§å‚ç…§ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
```json
"extensionBundle": {
  "id": "Microsoft.Azure.Functions.ExtensionBundle.Experimental",
  "version": "[4.*, 5.0.0)"
}
```
:::

#### MCPã‚µãƒ¼ãƒãƒ¼ã®ãƒ„ãƒ¼ãƒ«å®Ÿè£…
ç¶šã„ã¦å®Ÿéš›ã®Toolã«ã‚ãŸã‚‹é–¢æ•°ã‚’å®Ÿè£…ã—ã¾ã™ã€‚å†’é ­ã«Azure Functionsã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦HTTPãƒˆãƒªã‚¬ãƒ¼ã®é–¢æ•°ã‚’ä½œæˆã—ãŸã®ã§ã€ãã®é–¢æ•°ã‚’æ”¹å¤‰ã™ã‚‹ã®ãŒæ¥½ã§ã™ã€‚
```csharp
using Microsoft.Azure.Functions.Worker;
using Microsoft.Azure.Functions.Worker.Extensions.Mcp;
using System.Globalization;
using System.Text.Json;

namespace AzfuncMcp;
public class TimeUtil
{
    [Function(nameof(GetCurrentTime))]
    public string GetCurrentTime(
        [McpToolTrigger("getcurrenttime", "Gets the current time. If no timezone is specified, the tool will return the time in UTC.")] ToolInvocationContext context,
        [McpToolProperty("timezone", "string", "The name of the timezone.")] string timezone = "UTC"
        )
    {
        try
        {
            TimeZoneInfo timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(timezone);
            DateTime currentTime = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, timeZoneInfo);
            
            var response = new 
            {
                timezone = timeZoneInfo.StandardName,
                time = currentTime.ToString("yyyy-MM-dd HH:mm:ss", CultureInfo.InvariantCulture),
                displayName = timeZoneInfo.DisplayName
            };
            
            return JsonSerializer.Serialize(response);
        }
        catch (TimeZoneNotFoundException)
        {
            return $"The timezone '{timezone}' was not found.";
        }
        catch (InvalidTimeZoneException)
        {
            return $"The timezone '{timezone}' is invalid.";
        }
        catch
        {
            return "Could not get the current time.";
        }
    }
}
```


#### MCPã‚µãƒ¼ãƒãƒ¼ã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—å‡¦ç†
é–¢æ•°ãŒå®Ÿè£…ã§ããŸã‚‰ã€æ¬¡ã¯Azure Functionsã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—å‡¦ç†ã§ã‚ã‚‹Program.csã‚’ä¿®æ­£ã—ã¦MCPãƒ„ãƒ¼ãƒ«ã‚’ç™»éŒ²ã—ã¾ã™ã€‚
```csharp Program.cs
using Microsoft.Azure.Functions.Worker.Builder;
using Microsoft.Extensions.Hosting;
using AzfuncMcp;

var builder = FunctionsApplication.CreateBuilder(args);

builder.ConfigureFunctionsWebApplication();
builder.EnableMcpToolMetadata();

builder.ConfigureMcpTool(nameof(TimeUtil.GetCurrentTime))
    .WithProperty("timezone", "string", "The timezone.");

builder.Build().Run();
```

#### Azure ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€ŒAzuriteã€ã€€ã®èµ·å‹•
ç‰¹ã«ãƒ–ãƒ­ã‚°è¨˜äº‹ãªã©ã§ã®èª¬æ˜ãŒè¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸãŒã€MCPæ‹¡å¼µæ©Ÿèƒ½ã¯Blobã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã§ã™ã€‚ãã®ãŸã‚ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€Azureã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã‚ã‚‹Azuriteã‚’èµ·å‹•ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ã Azuriteã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã“ã¨ãŒãªã„å ´åˆã¯[Azurite ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/storage/common/storage-use-azurite?tabs=visual-studio-code%2Cblob-storage#install-azurite)ã‚’å‚è€ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

Azuriteã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€Shift + Ctrl + Pã§ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‚’é–‹ãã€ã€ŒAzurite: Startã€ã‚’é¸æŠã—ã¾ã™ã€‚ãã—ã¦Azure Functionsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®local.settings.jsonã§Azuriteã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚
```json local.settings.json
{
  "IsEncrypted": false,
  "Values": {
    "AzureWebJobsStorage": "UseDevelopmentStorage=true",//<=ã“ã‚Œ
    "FUNCTIONS_WORKER_RUNTIME": "dotnet-isolated"
  }
}
```

#### Azure Functionsã®èµ·å‹•
ã§ã¯ã€Azure Functionsã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•ã—ã¦å‹•ä½œç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
```bash
func start
```
ã¾ãŸã¯VS Codeã®ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ãƒ‡ãƒãƒƒã‚°èµ·å‹•ã—ã¾ã™ã€‚
ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦Azure Functionsã‚’ä½œæˆã—ãŸå ´åˆã€ãƒ‡ãƒãƒƒã‚°èµ·å‹•ã®ãŸã‚ã®launch.jsonãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚
ã€ŒRun and Debugã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒAttach to .NET Functionsã€ã‚’é¸æŠã—ã¦ãƒ‡ãƒãƒƒã‚°èµ·å‹•ã—ã¾ã™ã€‚

![MCPã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•](/images/azure-function-mcp/launch.png)


èµ·å‹•ã«æˆåŠŸã™ã‚‹ã¨MCPãƒ„ãƒ¼ãƒ«ãƒˆãƒªã‚¬ãƒ¼ã®é–¢æ•°ãŒèµ·å‹•ã•ã‚ŒãŸã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•](/images/azure-function-mcp/launched.png)

### MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼šVS Codeã®GitHub Copilotã®è¨­å®š
Shift + Ctrl + Pã§ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‚’é–‹ãã€ã€ŒMCP: Add Serverã€ã‚’é¸æŠã—ã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®è¿½åŠ ](/images/azure-function-mcp/addserver.png)

MCPã‚µãƒ¼ãƒãƒ¼ã®ç¨®é¡ã‚’é¸æŠã—ã¾ã™ã€‚ä»Šå›ã¯HTTPçµŒç”±ã§Azure Functionsã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã€HTTPã‚’é¸æŠã—ã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç¨®é¡](/images/azure-function-mcp/servertype.png)

MCPã‚µãƒ¼ãƒãƒ¼ã®URLã‚’å…¥åŠ›ã—ã¾ã™ã€‚ä»Šå›ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•ã—ã¦ã„ã‚‹ã®ã§ã€http://localhost:7071ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
MCPã‚µãƒ¼ãƒãƒ¼ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Œ/runtime/webhooks/mcp/sseã€ã®ãƒ‘ã‚¹ãŒè‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã€ã€Œ`http://localhost:7071/runtime/webhooks/mcp/sse`ã€ã‚’æŒ‡å®šã—ã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®URL](/images/azure-function-mcp/serverurl.png)

MCPã‚µãƒ¼ãƒãƒ¼ã®åå‰ã‚’å…¥åŠ›ã—ã¾ã™ã€‚ä»»æ„ã®åå‰ã§OKã§ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®åå‰](/images/azure-function-mcp/servername.png)

MCPã‚µãƒ¼ãƒãƒ¼ã®è¿½åŠ ãŒå®Œäº†ã™ã‚‹ã¨settings.jsonãŒæ›´æ–°ã•ã‚Œã€MCPã‚µãƒ¼ãƒãƒ¼ã®æƒ…å ±ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚
ã‚‚ã—ã€åˆæœŸçŠ¶æ…‹ã‹ã‚‰ä½•ã‚‚å¤‰ãˆã¦ã„ãªã‘ã‚Œã°ã€MCPã‚µãƒ¼ãƒãƒ¼ã®ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ã€Œ"mcp-server-timeã€ã¨ã„ã†åå‰ã®pythonã®MCPã‚µãƒ¼ãƒãƒ¼ãŒã™ã§ã«å­˜åœ¨ã—ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚ä»Šå›ä½œæˆã—ãŸãƒ„ãƒ¼ãƒ«ã¨ã®ç«¶åˆã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€"mcp-server-time"ã¯å‰Šé™¤ã—ã¦ã€ä½œæˆã—ãŸMCPã‚µãƒ¼ãƒãƒ¼ã®ã¿ãŒç™»éŒ²ã•ã‚ŒãŸçŠ¶æ…‹ã«ã—ã¾ã™ã€‚

```json settings.json
//ã€€çœç•¥
 "mcp": {
        "inputs": [],
        "servers": {
            "my-azfunc-mcp-server": {
                "type": "sse",
                "url": "http://localhost:7071/runtime/webhooks/mcp/sse"
            }
        }
    },
//ã€€çœç•¥
```

### ç–é€šç¢ºèª
GitHub Copilotã®ãƒãƒ£ãƒƒãƒˆã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã¾ã™ã€‚
ã“ã®æ™‚ã«ãƒ¢ãƒ¼ãƒ‰ãŒã€ŒAgentã€ã«è¨­å®šã™ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç–é€šç¢ºèª](/images/azure-function-mcp/agentmode.png)

ç¶šã„ã¦MCPã®è¨­å®šã‚¢ã‚¤ã‚³ãƒ³ï¼ˆã‚¹ãƒ‘ãƒŠã¨ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€MCPã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šã‚’é–‹ãã¾ã™ã€‚
æœ‰åŠ¹ãªMCPã‚µãƒ¼ãƒãƒ¼ã®ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§è¿½åŠ ã—ãŸMCPã‚µãƒ¼ãƒãƒ¼ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç–é€šç¢ºèª](/images/azure-function-mcp/serverlist.png)

ãã—ã¦ãƒãƒ£ãƒƒãƒˆã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã«ã€Œä»Šä½•æ™‚ï¼Ÿã€ãªã©ã¨å…¥åŠ›ã—ã¾ã™ã€‚
ã™ã‚‹ã¨ã€MCPã‚µãƒ¼ãƒãƒ¼ã‚’å‘¼ã³å‡ºã—ã¦è‰¯ã„ã‹ã®ç¢ºèªãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ã€ŒContinueã€ã‚’é¸æŠã—ã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç–é€šç¢ºèª](/images/azure-function-mcp/whattimeisit.png)

å®Ÿéš›ã«MCPã‚µãƒ¼ãƒãƒ¼ãŒå‘¼ã³å‡ºã•ã‚Œã€ç¾åœ¨æ™‚åˆ»ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç–é€šç¢ºèª](/images/azure-function-mcp/nowis.png)

ãªãŠã€Azure Functionsã®ãƒ‡ãƒãƒƒã‚°ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã«ã‚‚MCPã‚µãƒ¼ãƒãƒ¼ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã“ã¨ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç–é€šç¢ºèª](/images/azure-function-mcp/funclog.png)

ä½œæˆã—ãŸMCPã‚µãƒ¼ãƒãƒ¼ã¯ã€å¼•æ•°ã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ä¾‹ãˆã°ã€Œã‚·ã‚¢ãƒˆãƒ«ã¯ä»Šä½•æ™‚ï¼Ÿã€ã¨å…¥åŠ›ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã‚·ã‚¢ãƒˆãƒ«ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒè¨­å®šã•ã‚ŒMCPã‚µãƒ¼ãƒãƒ¼ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
![MCPã‚µãƒ¼ãƒãƒ¼ã®ç–é€šç¢ºèª](/images/azure-function-mcp/specifiedtimezone.png)

## ã¾ã¨ã‚
Azure Functionsã¯ä»¥å‰ã‹ã‚‰LLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚·ãƒŠãƒªã‚ªã¨ç›¸æ€§ãŒè‰¯ã„å ´é¢ãŒå¤šã‹ã£ãŸã§ã™ãŒã€MCPã‚µãƒ¼ãƒãƒ¼ã«ã‚‚å¯¾å¿œã—ãŸã“ã¨ã§ã€ã‚ˆã‚ŠLLMã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ãƒŠãƒªã‚ªé©ç”¨ã®å¹…ãŒåºƒãŒã‚Šã¾ã—ãŸã€‚
MCPã¯ã¾ã ã¾ã æ–°ã—ã„æŠ€è¡“ã§ã™ãŒã€æ¨™æº–ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãŒã‚ã‚Šã€ãã®åˆ©ç”¨è€…ãŒå¢—ãˆã¦ã„ã‚‹ã“ã¨ã¯ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®é¢ã§ã‚‚éå¸¸ã«è‰¯ã„ã“ã¨ã ã¨æ€ã„ã¾ã™ã€‚

## è£œè¶³ï¼šã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆ
ãƒ­ãƒ¼ã‚«ãƒ«ã§ç–é€šç¢ºèªãŒå®Œäº†ã—ãŸAzure Functionsã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã¯ã€é€šå¸¸ã®Azure Functionsã¨åŒæ§˜ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒã§ãã¾ã™([å‚è€ƒæƒ…å ±](https://learn.microsoft.com/ja-jp/azure/azure-functions/functions-develop-vs-code?tabs=node-v4%2Cpython-v2%2Cisolated-process%2Cquick-create&pivots=programming-language-csharp#republish-project-files))ã€‚

ãã®å ´åˆã®æ³¨æ„ç‚¹ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®Azure Functionsã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚­ãƒ¼èªè¨¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ä½¿ç”¨ã™ã‚‹å ´åˆã¯è¨­å®šã‚’å¤‰æ›´ã—ã¦ã‚­ãƒ¼æƒ…å ±ã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã®MCPã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šï¼ˆsettings.jsonï¼‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã“ã®ã‚ˆã†ã«æ§‹æˆã™ã‚‹ã¨MCPã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ãŸéš›ã«Functionsã®ã‚­ãƒ¼ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã€å®Ÿéš›ã«Azure Functionsã®è¨­å®šç”»é¢ã‹ã‚‰å–å¾—ã—ãŸã‚­ãƒ¼ã‚’å…¥åŠ›ã™ã‚‹ã¨ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã®Azure Functionsã«ã‚­ãƒ¼èªè¨¼ä»˜ãã§æ¥ç¶šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```json settings.json
"mcp": {
        "inputs": [],
        "servers": {
            "my-azfunc-mcp-server": {
                "type": "sse",
                "url": "<å®Ÿéš›ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸAzure Functionsã®ãƒ™ãƒ¼ã‚¹URL>/runtime/webhooks/mcp/sse",
                "headers": {
                    "x-functions-key": "${input:functions-mcp-extension-system-key}"
                }
            }
        }
    },
```

ãªãŠã€æœ¬è¨˜äº‹ã®åŸ·ç­†æ™‚ç‚¹ã§ã¯Windowsã®Azure Functionsä¸Šã§ã¯ã†ã¾ãå‹•ä½œã—ãªã„ã¨ã„ã†å ±å‘ŠãŒã‚ã‚‹ã‚ˆã†ã§ã™(Linuxã§ã¯å•é¡Œãªã„æ¨¡æ§˜)ã€‚
https://github.com/Azure-Samples/remote-mcp-functions-dotnet/issues/8

## å‚è€ƒ
Azure Functionsã§ã®MCPã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè£…ã‚µãƒ³ãƒ—ãƒ«
https://github.com/Azure-Samples/remote-mcp-functions-dotnet/tree/main

MCPã‚µãƒ¼ãƒãƒ¼å…¨èˆ¬ã®å®Ÿè£…ã‚µãƒ³ãƒ—ãƒ«
https://github.com/modelcontextprotocol/servers